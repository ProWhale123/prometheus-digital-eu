---
// src/pages/blog/index.astro

// 1. Komponensek importálása a konzisztens struktúrához
// FIGYELEM: Mivel a 'blog' mappában vagyunk, eggyel több ../ kell az elérésükhöz!
import Layout from '../../layouts/Layout.astro';
import Header from '../../components/Header.astro';
import Footer from '../../components/Footer.astro';
import Contact from '../../components/Contact.astro';
import TiltCard from '../../components/react/TiltCard.jsx'; // ÚJ IMPORT
// 2. Astro eszközök importálása
import { getCollection } from 'astro:content';
import { Image } from 'astro:assets';

// 3. Háttérkép importálása a Hero szekcióhoz
// CSERÉLD LE egy neked tetsző blog háttérképre!
import blogImage from '../../../public/images/blog-background.jpg'; 

// 4. Blog bejegyzések lekérése és rendezése
const posts = await getCollection('blog');
const sortedPosts = posts.sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf());
---

<Layout 
    title="Blog - Prometheus Digital" 
    description="Gondolatok, tippek és hírek a digitális világról. Olvasd el legújabb bejegyzéseinket webfejlesztés, Astro és SEO témakörben."
>
    <Header />

    <main>
        <section 
            class="relative flex items-center justify-center text-center min-h-[50vh] overflow-hidden"
        >
            <div class="absolute inset-0 z-0">
                <Image 
                    src={blogImage}
                    alt="Prometheus Digital - Blog háttérkép"
                    widths={[400, 800, 1200, 1920]}
                    sizes="(max-width: 800px) 100vw, 1920px"
                    quality="mid"
                    class="w-full h-full object-cover"
                />
            </div>
             <div class="absolute inset-0 bg-black/70"></div>
            <div class="container mx-auto px-6 relative z-10">
                <h1 class="text-4xl md:text-6xl font-bold text-white mb-4">
                    Gondolatok & <span class="text-transparent bg-clip-text bg-gradient-to-r from-sky-400 to-cyan-300">Újdonságok</span>
                </h1>
                <p class="max-w-3xl mx-auto text-lg text-gray-300">
                    A digitális iránytűd. Itt osztjuk meg veled a legfrissebb trendeket, technikai tippeket és azokat a gondolatokat, amik előreviszik a vállalkozásodat.
                </p>
            </div>
        </section>

<section class="py-20 md:py-32">
    <div class="container mx-auto px-6">
        <div class="max-w-3xl mx-auto space-y-12">
            {sortedPosts.map(post => (
                
                /* JAVÍTVA: TiltCard használata a blog kártyáknál is */
                <TiltCard client:visible className="h-full">
                    <a href={`/blog/${post.slug}/`} class="block group h-full">
                        <article class="bg-gray-900/50 border border-white/10 rounded-2xl p-8 h-full">
                            
                            <p class="text-sm text-gray-400 mb-2">
                              {post.data.pubDate.toLocaleDateString('hu-HU', {
                                year: 'numeric',
                                month: 'long',
                                day: 'numeric'
                              })}
                            </p>
                            
                            <h2 class="text-3xl font-bold text-white mb-4 group-hover:text-sky-400 transition-colors duration-300">
                                {post.data.title}
                            </h2>

                            <p class="text-gray-300 mb-6">{post.data.description}</p>
                            
                            <span class="font-bold text-sky-400">
                                Tovább olvasom →
                            </span>

                        </article>
                    </a>
                </TiltCard>

            ))}
        </div>
    </div>
</section>

        <Contact />
    </main>

    <Footer />
</Layout>