---
// src/components/FeaturedWork.astro (ENGLISH VERSION)
import { Image } from "astro:assets";

// React Tilt Effect
import TiltCard from "./react/TiltCard.jsx";

// Images (from src/assets!)
import project1Image from "../assets/images/project-1.jpg";
import project2Image from "../assets/images/project-2.jpg";
import project3Image from "../assets/images/project-3.jpg";
import project4Image from "../assets/images/project-4.jpg";
import project5Image from "../assets/images/project-5.jpg";
import project6Image from "../assets/images/project-6.jpg";
import project7Image from "../assets/images/project-7.png";
import project8Image from "../assets/images/project-8.png";

const projects = [
    {
        title: "Nebula Motors",
        description:
            "The electric mobility of the future. An immersive, cyberpunk aesthetic website where silence is the new loud. Stunning visual storytelling and motion design.",
        tags: ["Automotive", "Cyberpunk", "Motion UI", "Astro"],
        imageSrc: project8Image,
        liveUrl: "https://nebula-motors.eu/",
    },
    {
        title: "LUX SECURE",
        description:
            "Secure the Invisible. A high-end cybersecurity infrastructure provider's futuristic, terminal-style interface. The design suggests technological dominance and invulnerability.",
        tags: ["Cybersecurity", "Terminal UI", "Tech", "Dark Mode"],
        imageSrc: project7Image,
        liveUrl: "https://luxsecure.eu/",
    },
    {
        title: "Clean Travel Agency Website",
        description:
            "A clean and modern website for DOL Bt. travel agency, specializing in the 'Határtalanul!' program.",
        tags: ["Astro", "Travel", "Lead Gen"],
        imageSrc: project1Image,
        liveUrl: "https://dolbt.eu/",
    },
    {
        title: "Elegant Fine Dining Website",
        description:
            "A clean and exclusive online presence for the 'Gastronomo' fine dining restaurant.",
        tags: ["UI/UX", "Minimalist", "GSAP"],
        imageSrc: project2Image,
        liveUrl: "https://gastronomo.eu/",
    },
    {
        title: "Modern Restaurant Website",
        description:
            "Cozy website for Duna Rapszódia restaurant, focusing on visual experience and the menu.",
        tags: ["Responsive", "Gallery", "Design"],
        imageSrc: project3Image,
        liveUrl: "https://duna-rapszodia.hu/",
    },
    {
        title: "Construction & Renovation Website",
        description:
            "Trust-inspiring website placing quality work and expertise in the forefront.",
        tags: ["Portfolio", "Lead Gen", "Corporate"],
        imageSrc: project4Image,
        liveUrl: "https://renovation-company.netlify.app/",
    },
    {
        title: "Law Firm Website",
        description:
            "Digital business card suggesting reliability, focusing on practice areas and contact.",
        tags: ["Strategy", "Clean", "Trust"],
        imageSrc: project5Image,
        liveUrl: "https://kovacslegal.hu/",
    },
    {
        title: "Bistro Landing Page",
        description:
            "One-page introduction site built on visual storytelling for a traditional restaurant.",
        tags: ["Landing", "Storytelling", "Astro"],
        imageSrc: project6Image,
        liveUrl: "https://bistrobudapest.hu/",
    },
];
---

<section class="py-20 md:py-32 overflow-hidden">
    <div class="container mx-auto px-6">
        <div class="flex flex-col items-center mb-16 animate-on-scroll">
            <div class="text-center max-w-2xl">
                <h2 class="text-4xl md:text-5xl font-bold text-white mb-4">
                    Our Featured <span
                        class="text-transparent bg-clip-text bg-gradient-to-r from-sky-400 to-cyan-300"
                        >Work</span
                    >
                </h2>
                <p class="text-lg text-gray-300">
                    We take pride in our craft. Check out some of our recent
                    projects where we helped our partners stand out in the
                    digital space.
                </p>
            </div>
        </div>

        <div class="relative max-w-7xl mx-auto animate-on-scroll">
            <div
                id="featured-work-gallery"
                class="flex overflow-x-auto snap-x snap-mandatory pb-8 scroll-smooth"
                style="scrollbar-width: none;"
            >
                {
                    projects.map((project) => (
                        <div class="flex-shrink-0 w-10/12 md:w-1/2 lg:w-1/3 snap-center px-4">
                            <TiltCard client:idle className="h-full">
                                <a
                                    href={project.liveUrl}
                                    target="_blank"
                                    rel="noopener noreferrer"
                                    class="group block bg-gray-900/50 border-2 border-white/10 rounded-2xl overflow-hidden h-full transform transition-all duration-300 hover:border-sky-500/50 hover:shadow-2xl hover:shadow-sky-500/10 hover:-translate-y-2"
                                    style="will-change: transform;"
                                >
                                    <div class="overflow-hidden">
                                        <Image
                                            src={project.imageSrc}
                                            alt={project.title}
                                            widths={[400, 600]}
                                            sizes="(max-width: 768px) 90vw, 33vw"
                                            quality="mid"
                                            class="w-full h-56 object-cover transition-transform duration-300 group-hover:scale-105"
                                        />
                                    </div>
                                    <div class="p-6">
                                        <h3 class="text-xl font-bold text-white mb-3 group-hover:text-sky-300 transition-colors">
                                            {project.title}
                                        </h3>
                                        <p class="text-gray-300 mb-6 text-sm h-20 line-clamp-4">
                                            {project.description}
                                        </p>
                                        <div class="flex flex-wrap gap-2">
                                            {project.tags.map((tag) => (
                                                <span class="bg-sky-500/10 text-sky-300 text-xs font-semibold px-3 py-1 rounded-full">
                                                    {tag}
                                                </span>
                                            ))}
                                        </div>
                                    </div>
                                </a>
                            </TiltCard>
                        </div>
                    ))
                }
            </div>

            {/* Scroll Buttons */}
            <div class="hidden md:flex justify-end absolute -top-20 right-0">
                <button
                    id="scroll-left-btn"
                    aria-label="Scroll left"
                    class="w-12 h-12 rounded-full bg-gray-800/50 border border-white/10 text-white flex items-center justify-center transition-all duration-300 hover:bg-sky-500 hover:scale-105 mr-4"
                >
                    <svg
                        xmlns="http://www.w3.org/2000/svg"
                        class="h-6 w-6"
                        fill="none"
                        viewBox="0 0 24 24"
                        stroke="currentColor"
                        stroke-width="2"
                        ><path
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            d="M15 19l-7-7 7-7"></path></svg
                    >
                </button>
                <button
                    id="scroll-right-btn"
                    aria-label="Scroll right"
                    class="w-12 h-12 rounded-full bg-gray-800/50 border border-white/10 text-white flex items-center justify-center transition-all duration-300 hover:bg-sky-500 hover:scale-105"
                >
                    <svg
                        xmlns="http://www.w3.org/2000/svg"
                        class="h-6 w-6"
                        fill="none"
                        viewBox="0 0 24 24"
                        stroke="currentColor"
                        stroke-width="2"
                        ><path
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            d="M9 5l7 7-7 7"></path></svg
                    >
                </button>
            </div>
        </div>
    </div>
</section>

<style>
    #featured-work-gallery::-webkit-scrollbar {
        display: none;
    }
</style>

<script>
    function initGallery() {
        const gallery = document.getElementById("featured-work-gallery");
        const scrollLeftBtn = document.getElementById("scroll-left-btn");
        const scrollRightBtn = document.getElementById("scroll-right-btn");

        if (gallery && scrollLeftBtn && scrollRightBtn) {
            const scrollAmount = () => {
                const card = gallery.querySelector("div:first-child");
                return card ? (card as HTMLElement).offsetWidth + 16 : 320;
            };

            scrollLeftBtn.onclick = () => {
                gallery.scrollBy({ left: -scrollAmount(), behavior: "smooth" });
            };

            scrollRightBtn.onclick = () => {
                gallery.scrollBy({ left: scrollAmount(), behavior: "smooth" });
            };
        }
    }

    initGallery();
    document.addEventListener("astro:page-load", initGallery);
</script>
